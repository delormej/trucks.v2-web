<div *ngIf="driverSettlement!=null">
    <h3>
        <a [routerLink]="['/driver']" 
            [queryParams]="{driver: driverSettlement.driver}">
            {{driverSettlement.driver}}
        </a>, Truck {{driverSettlement.trucks}}
    </h3>

    <app-team [driver]="driver" (saveClicked)="onTeammateSave($event)"></app-team>

    <app-loads [driverSettlement]="driverSettlement"></app-loads>

    <div fxLayoutGap fxLayoutAlign="start stretch" fxLayoutGap="15px">
        <mat-card fxFlex="33">
            <app-deductions [driver]="driver" 
                [driverSettlement]="driverSettlement"
                (deleteManualEntryEvent)="deleteManualEntry($event)"
                (newDeduction)="addManualEntry($event)">
            </app-deductions>
        </mat-card>
        <mat-card fxFlex="33">
            <app-credits [driverSettlement]="driverSettlement"
                (deleteManualEntryEvent)="deleteManualEntry($event)"
                (newDeduction)="addManualEntry($event)">
            </app-credits>
        </mat-card>
        <mat-card fxFlex="33">
            <mat-card-title>Driver Income</mat-card-title>
            <table>
                <tr>
                    <td><div class="manual-row">Driver Base</div></td>
                    <td><div class="manual-row manual-row-data">{{driverSettlement.baseTotal | number:'0.2-2'}}</div></td>
                </tr>
                <tr>
                    <td><div class="manual-row">FSC</div></td>
                    <td><div class="manual-row manual-row-data">{{driverSettlement.fscTotal | number:'0.2-2'}}</div></td>
                </tr>
                <tr>
                    <td><div class="manual-row">Accessorials</div></td>
                    <td><div class="manual-row manual-row-data">{{driverSettlement.accessorialTotal | number:'0.2-2'}}</div></td>
                </tr>
                <tr>
                    <td><div class="manual-row">Total Credits</div></td>
                    <td><div class="manual-row manual-row-data">{{driverSettlement.creditsTotal | number:'0.2-2'}}</div></td>
                </tr>
                <tr>
                    <td><div class="manual-row"><strong>Total Income</strong></div></td>
                    <td><div class="manual-row manual-row-data">{{driverSettlement.income | number:'0.2-2'}}</div></td>
                </tr>                
                <tr>
                    <td><div class="manual-row">Total Deductions</div></td>
                    <td><div class="manual-row manual-row-data">{{driverSettlement.deductionsTotal | number:'0.2-2'}}</div></td>
                </tr>                                
                <tr>
                    <td><div class="manual-row">Previous Negative Balance</div></td>
                    <td><div class="manual-row manual-row-data">{{driverSettlement.previousNegativeBalance | number:'0.2-2'}}</div></td>
                </tr>                                
                <tr>
                    <td><div class="manual-row"><strong>Amount Due</strong></div></td>
                    <td><div class="manual-row manual-row-data"><strong>{{driverSettlement.amountDue | number:'0.2-2'}}</strong></div></td>
                </tr>                                
            </table>
        </mat-card>
    </div>

    <button type="submit" class="btn btn-secondary" (click)="recreate()">Recreate</button>    
    <br/>
    <a href={{getWorkbookLink(driverSettlement)}}>
        Download Workbook
    </a>
    
    <app-driver-settlement-notes [driverSettlement]="driverSettlement"></app-driver-settlement-notes>
</div>