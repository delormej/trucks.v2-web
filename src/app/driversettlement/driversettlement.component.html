<div *ngIf="driverSettlement!=null">
    <h3>
        <a [routerLink]="['/driver']" 
            [queryParams]="{driver: driverSettlement.driver}">
            {{driverSettlement.driver}}
        </a>, Truck {{driverSettlement.trucks}}
    </h3>

    <app-team [driver]="driver" (saveClicked)="onTeammateSave($event)"></app-team>

    <app-loads [driverSettlement]="driverSettlement"></app-loads>

    <div fxLayoutGap fxLayoutAlign="start stretch" fxLayoutGap="15px">
        <mat-card fxFlex="33">
            <app-deductions [driver]="driver" 
                [driverSettlement]="driverSettlement"
                (deleteManualEntryEvent)="deleteManualEntry($event)"
                (newDeduction)="addManualEntry($event)">
            </app-deductions>
        </mat-card>
        <mat-card fxFlex="33">
            <mat-card-title>Credits</mat-card-title>
            <table>
                <tr>
                    <td></td>
                    <td>0</td>
                </tr>            
                <tr>
                    <td></td>
                    <td>0</td>
                </tr>
                <tr>
                    <td></td>
                    <td>0</td>
                </tr>
                <tr>
                    <td></td>
                    <td>0</td>
                </tr>
                <tr>
                    <td>Total Credits</td>
                    <td>{{driverSettlement.creditsTotal | number:'0.2-2'}}</td>
                </tr>            
            </table>
            <mat-card-actions align="start">
                <button mat-raised-button color="primary" (click)="openDialog('Credit')">Add</button>
            </mat-card-actions>
        </mat-card>
        <mat-card fxFlex="33">
            <mat-card-title>Driver Income</mat-card-title>
            <table>
                <tr>
                    <td>Driver Base</td>
                    <td>{{driverSettlement.baseTotal | number:'0.2-2'}}</td>
                </tr>
                <tr>
                    <td>FSC</td>
                    <td>{{driverSettlement.fscTotal | number:'0.2-2'}}</td>
                </tr>
                <tr>
                    <td>Accessorials</td>
                    <td>{{driverSettlement.accessorialTotal | number:'0.2-2'}}</td>
                </tr>
                <tr>
                    <td>Total Credits</td>
                    <td>{{driverSettlement.creditsTotal | number:'0.2-2'}}</td>
                </tr>
                <tr>
                    <td><strong>Total Income</strong></td>
                    <td>{{driverSettlement.income | number:'0.2-2'}}</td>
                </tr>                
                <tr>
                    <td>Total Deductions</td>
                    <td>{{driverSettlement.deductionsTotal | number:'0.2-2'}}</td>
                </tr>                                
                <tr>
                    <td>Previous Negative Balance</td>
                    <td>{{driverSettlement.previousNegativeBalance | number:'0.2-2'}}</td>
                </tr>                                
                <tr>
                    <td><strong>Amount Due</strong></td>
                    <td><strong>{{driverSettlement.amountDue | number:'0.2-2'}}</strong></td>
                </tr>                                
            </table>
        </mat-card>
    </div>

    <button type="submit" class="btn btn-secondary" (click)="recreate()">Recreate</button>    
    <br/>
    <a href={{getWorkbookLink(driverSettlement)}}>
        Download Workbook
    </a>
    
    <app-driver-settlement-notes [driverSettlement]="driverSettlement"></app-driver-settlement-notes>
</div>